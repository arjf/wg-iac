#cloud-config
users:
  - default
  - name: ajdj
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    lock_passwd: false
    ssh_import_id: 
      - gh:arjf

  # Ansible user
  - name: ansible
    gecos: Ansible User
    shell: /bin/bash
    groups: users,admin,wheel,lxd
    sudo: "ALL=(ALL) NOPASSWD:ALL"
    ssh_import_id: 
      - gh:arjf

# Packages and updates
package_update: true
package_upgrade: false
packages:
  - git
  - python3-pip
  - wireguard
  - wireguard-tools
  - ufw
  - ansible

# Apply WG playbook
ansible:
  install_method: distro
  package_name: ansible
  pull:
    url: "https://github.com/arjf/wg-iac.git"
    playbook_name: "ansible/wireguard.yml"